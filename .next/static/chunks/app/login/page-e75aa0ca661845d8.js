(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{3661:function(e,t,r){Promise.resolve().then(r.bind(r,4834))},4108:function(e,t,r){"use strict";r.d(t,{AppProvider:function(){return i},I:function(){return s}});var a=r(7437),o=r(2265),n=r(9038),l=r(5828);let s=(0,o.createContext)({isMobile:!1,isLoggedIn:null,setIsLoggedIn:()=>{},darkMode:!1,setDarkMode:()=>{}}),i=e=>{let{children:t}=e,[r,i]=(0,o.useState)(!1),[c,d]=(0,o.useState)(null),[u,g]=(0,o.useState)(!1),[m,p]=(0,o.useState)(!0);(0,o.useEffect)(()=>{p(!1),g(JSON.parse(localStorage.getItem("preferredMode")||"false")),i(f()),v(),h();let e=()=>i(window.innerWidth<=768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,o.useEffect)(()=>{let e=document.querySelector("body");e&&(e.classList.remove("--dark"),u&&e.classList.add("--dark"),document.documentElement.setAttribute("data-color-scheme",u?"dark":"light"))},[u]);let f=()=>{let e=window.innerWidth,t=window.navigator.userAgent.toLowerCase();return["android","webos","iphone","ipad","ipod","blackberry","windows phone"].some(e=>t.includes(e))||e<=768},h=()=>{var e,t,r;let a=localStorage.getItem("preferredMode"),o=JSON.parse(localStorage.getItem("preferredMode")||"false");g(a?o:null===(r=window)||void 0===r?void 0:null===(t=r.matchMedia)||void 0===t?void 0:null===(e=t.call(r,"(prefers-color-scheme:dark)"))||void 0===e?void 0:e.matches)},v=async()=>{try{let e=await (0,n.WX)((0,l.PR)().token);e&&e.token?d(!0):d(!1)}catch(e){d(!1)}},b=o.useMemo(()=>({isMobile:r,setIsLoggedIn:d,isLoggedIn:c,darkMode:u,setDarkMode:g}),[r,d,c,u,g]);return m?null:(0,a.jsx)(s.Provider,{value:b,children:t})}},4834:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return g}});var a=r(7437),o=r(2265),n=r(9038),l=r(8726),s=r(4108);function i(e){let t=!1,{darkMode:r}=(0,o.useContext)(s.I),{value:n,name:l,label:i,updateData:c,className:d,type:u,placeholder:g,cols:m,rows:p,style:f,disabled:h,onSubmit:v,resize:b}=e;return(0,o.useEffect)(()=>{if(v){let e=e=>{"Enter"===e.key&&v()};return t||(document.addEventListener("keydown",e),t=!0),()=>{document.removeEventListener("keydown",e),t=!1}}},[v]),"textarea"===u?(0,a.jsxs)("div",{className:"inputfield__container",style:f,children:[i?(0,a.jsx)("h2",{className:"inputfield__label".concat(r?"--dark":""),style:{color:r?"lightgray":""},children:i}):"",(0,a.jsx)("textarea",{className:d||"textarea__default".concat(r?"--dark":""),placeholder:g||"",onChange:e=>c?c(l,e):null,value:n,cols:m,rows:p,disabled:h,style:{resize:b||"none",color:r?"lightgray":""}})]}):(0,a.jsxs)("div",{className:"inputfield__container",style:f,children:[i?(0,a.jsx)("h2",{className:"inputfield__label".concat(r?"--dark":""),style:{color:r?"lightgray":""},children:i}):"",(0,a.jsx)("input",{type:u||"text",className:d||"inputfield__default".concat(r?"--dark":""),placeholder:g||"",onChange:e=>c?c(l,e):null,value:n,disabled:h,style:{color:r?"lightgray":""}})]})}var c=r(5828);function d(e){let{label:t,handleClick:r,className:n,bgColor:l,textColor:i,disabled:d,svg:u,style:g}=e,[m,p]=(0,o.useState)({...g}),{darkMode:f}=(0,o.useContext)(s.I);return(0,o.useEffect)(()=>{p({...m,backgroundColor:l||"",color:i||"black"})},[f]),u?(0,a.jsxs)("div",{className:"button__icon",onClick:r,style:{backgroundColor:l||"",border:"1px solid ".concat(l||""),color:i||"black",opacity:d?".3":"",padding:".2vw",cursor:d?"not-allowed":"",display:"flex",flexDirection:"row",minHeight:"2rem",alignItems:"center",gap:".5rem",paddingInline:".5rem",...m},onMouseEnter:()=>p({...g,backgroundColor:"transparent",color:f?"white":(0,c.g5)(l)?"black":l}),onMouseLeave:()=>p({...g,backgroundColor:l||"",color:i||"black"}),children:[(0,a.jsx)("img",{src:u,alt:"Button",className:"button__svg"}),t||""]}):(0,a.jsx)("button",{className:n||"button__default",onClick:r,style:{backgroundColor:l||"",border:"1px solid ".concat(l||""),color:!i&&f?"lightgray":i||"black",opacity:d?".3":"",cursor:d?"not-allowed":"",...m},disabled:d,onMouseEnter:()=>p({...g,backgroundColor:"transparent",color:l||""}),onMouseLeave:()=>p({...g,backgroundColor:l||"",color:i||"black"}),children:t||""})}var u=r(6463);function g(e){let{}=e,[t,r]=(0,o.useState)({email:"",password:""}),[c,g]=(0,o.useState)(!1),m=(0,u.useRouter)(),{setIsLoggedIn:p}=(0,o.useContext)(s.I),f=(e,a)=>{let o=a.target.value;r({...t,[e]:o})},h=async()=>{g(!0);let e=l.Am.loading("Logging in..."),r=await (0,n.pH)(t);return r?(l.Am.success("Welcome, ".concat(r.username.split(" ")[0])),p(!0),localStorage.setItem("user",JSON.stringify({...r,login:new Date})),setTimeout(()=>m.push("/editor"),1500)):l.Am.error("Error logging in, try again later"),g(!1),l.Am.remove(e)};return(0,a.jsxs)("div",{className:"login__container",children:[(0,a.jsx)("h1",{className:"page__title",children:"Login"}),(0,a.jsxs)("div",{className:"login__box",children:[(0,a.jsx)(i,{label:"Email",name:"email",updateData:f,type:"email"}),(0,a.jsx)(i,{label:"Password",name:"password",updateData:f,type:"password"}),(0,a.jsx)(d,{label:"Login",handleClick:h,disabled:!t.email||!t.password||c,style:{width:"100%"},textColor:"white",bgColor:"#114b5f"})]})]})}},5828:function(e,t,r){"use strict";r.d(t,{PR:function(){return o},g5:function(){return a}});let a=e=>{var t;if(!(e="gray"===e?"#808080":"lightgray"===e?"#d3d3d3":"black"===e?"#000000":"white"===e?"#ffffff":e)||!e.includes("#"))return!1;let[r,a,o]=(null===(t=e.match(/[A-Za-z0-9]{2}/g))||void 0===t?void 0:t.map(e=>parseInt(e,16)))||[];return r/255*.2126+a/255*.7152+o/255*.0722>.5},o=()=>localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")||"{}"):{}},9038:function(e,t,r){"use strict";r.d(t,{WX:function(){return l},pH:function(){return n}});var a=r(8472);let o=r(357).env.NEXT_PUBLIC_BASE_URL||"http://localhost:3000",n=async e=>{try{let t=await a.Z.post("".concat(o,"/api/user/login"),e,{withCredentials:!0}),r=JSON.parse(localStorage.getItem("user")||"{}");return localStorage.setItem("user",JSON.stringify({...r,...t.data})),t.data}catch(e){console.error(e)}},l=async e=>{try{return(await a.Z.post("".concat(o,"/api/user/verify"),{},{withCredentials:!0,params:{token:e}})).data||!1}catch(e){return!1}}}},function(e){e.O(0,[466,971,23,744],function(){return e(e.s=3661)}),_N_E=e.O()}]);